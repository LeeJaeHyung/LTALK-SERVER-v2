# LTALK-SERVER-v2

## π“ μ†κ°
`LTALK-SERVER-v2`λ” μ‹¤μ‹κ°„ μ±„ν… λ° μμ„± μ±„ν… κΈ°λ¥μ„ μ κ³µν•λ” **L-TALK ν”„λ΅μ νΈμ λ©”μΈ μ„λ²„**μ…λ‹λ‹¤.  
λΉ„λ™κΈ° TCP/IP ν†µμ‹  κΈ°λ°μΌλ΅ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„ μ•μ •μ μΈ μ—°κ²°μ„ μ μ§€ν•λ©°,  
μμ„± μ±„ν… μ„λ²„μΈ **L-TALK-VOICESERVER**μ™€μ μ¤‘κ³„λ¥Ό μ§€μ›ν•©λ‹λ‹¤.

---

## π› οΈ μ£Όμ” κΈ°λ¥

### β… NIO κΈ°λ° λΉ„λ™κΈ° TCP/IP ν†µμ‹ 
- `AsynchronousChannelGroup`μ„ μ΄μ©ν•΄ **λ…ΌλΈ”λ΅ν‚Ή λΉ„λ™κΈ° λ°©μ‹**μΌλ΅ ν΄λΌμ΄μ–ΈνΈμ™€ ν†µμ‹ 
- ν΄λΌμ΄μ–ΈνΈμ™€ L-TALK-VOICESERVER κ°„μ μ—°κ²°μ„ μ„λ²„κ°€ μ¤‘κ³„
- ν΄λΌμ΄μ–ΈνΈμ™€ VOICESERVER λ¨λ‘ λ™μΌν• ν”„λ΅ν† μ½ κΈ°λ° ν†µμ‹ 

### β… μμ„± μ±„ν… μ„λ²„μ™€μ μ—°λ™
- **L-TALK-VOICESERVER**μ™€ TCPλ¥Ό ν†µν•΄ μ§μ ‘ ν†µμ‹ 
- ν΄λΌμ΄μ–ΈνΈκ°€ μμ„± μ±„ν…λ°©μ— μ ‘μ† μ”μ²­ μ‹ VOICESERVERμ— μ±„ν…λ°© μ •λ³΄ λ° ν΄λΌμ΄μ–ΈνΈ μ •λ³΄λ¥Ό μ „λ‹¬
- VOICESERVER λ‚΄λ¶€μ—μ„ `chatRoomId`, `memberId`, `SocketAddress`λ¥Ό κΈ°λ°μΌλ΅ μμ„± μ±„ν…λ°© κµ¬μ„±

### β… μ‚¬μ©μ μΈμ¦ λ° λ°μ΄ν„° κ΄€λ¦¬
- νμ›κ°€μ…, λ΅κ·ΈμΈ, μ‚¬μ©μ μ •λ³΄ κ΄€λ¦¬
- μ±„ν…λ°© μƒμ„±, μ°Έμ—¬, λ©”μ‹μ§€ μ „μ†΅, μ½μ μ²λ¦¬ λ“± μ±„ν… μ „λ° κΈ°λ¥ μ κ³µ
- ν΄λΌμ΄μ–ΈνΈ μ ‘μ† μ •λ³΄ λ° μ±„ν…λ°© μƒνƒ κ΄€λ¦¬

### β… λ°μ΄ν„°λ² μ΄μ¤
- **MySQL**μ„ μ‚¬μ©ν• κ΄€κ³„ν• λ°μ΄ν„°λ² μ΄μ¤ κµ¬μ„±
- **JPA**λ¥Ό μ΄μ©ν•μ—¬ Entity κ΄€λ¦¬ λ° ORM μ²λ¦¬
- μ£Όμ” μ—”ν‹°ν‹°:
  - `Member`: μ‚¬μ©μ μ •λ³΄
  - `ChatRoom`: μ±„ν…λ°© μ •λ³΄
  - `ChatRoomMember`: μ±„ν…λ°© μ°Έμ—¬μ μ •λ³΄
  - `Chat`: μ±„ν… λ©”μ‹μ§€


---

## β΅ μ£Όμ” ν†µμ‹  νλ¦„

1. ν΄λΌμ΄μ–ΈνΈ β†’ λ©”μΈ μ„λ²„: TCP/IP μ ‘μ† λ° λ΅κ·ΈμΈ/νμ›κ°€μ…
2. ν΄λΌμ΄μ–ΈνΈ β†’ λ©”μΈ μ„λ²„: μμ„± μ±„ν…λ°© μ ‘μ† μ”μ²­
3. λ©”μΈ μ„λ²„ β†’ VOICESERVER: ν΄λΌμ΄μ–ΈνΈμ `chatRoomId`, `memberId`, `ip`, `port` μ „λ‹¬
4. VOICESERVER: μμ„± μ±„ν…λ°© κµ¬μ„± (`Map<chatRoomId, List<Member>>` ν•νƒλ΅ κ΄€λ¦¬)
5. ν΄λΌμ΄μ–ΈνΈ β†” λ©”μΈ μ„λ²„ β†” VOICESERVER: μƒνƒ κ΄€λ¦¬

---

## π€ μ‚¬μ© κΈ°μ 

| κΈ°μ  μ¤νƒ        | μ„¤λ…                                 |
| ---------------- | ------------------------------------ |
| Java (NIO)       | λΉ„λ™κΈ° TCP μ„λ²„ (`AsynchronousChannelGroup`) |
| MySQL            | μ‚¬μ©μ λ° μ±„ν… λ°μ΄ν„° κ΄€λ¦¬          |
| JPA / Hibernate  | ORM λ° λ°μ΄ν„°λ² μ΄μ¤ μ—°λ™             |
| JSON             | ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ κ°„ λ°μ΄ν„° ν¬λ§·      |

---

## π“ κ°λ° μ¤‘ μ°Έκ³ ν• μ΄μλ“¤

- `DatagramSocket`μ„ μ΄μ©ν• UDP ν¬νΈ ν• λ‹Ή μ‹ `getLocalPort()` μ‚¬μ©
- ν΄λΌμ΄μ–ΈνΈμ™€ VOICESERVER κ°„ μ—°κ²° μ •λ³΄ μ „λ‹¬ κµ¬μ΅° (`chatRoomId`, `memberId`, `ip`, `port`)
- TCPμ™€ UDPλ¥Ό λ³‘ν–‰ν• μ‹¤μ‹κ°„ λ©”μ‹μ§€ λ° μμ„± λ°μ΄ν„° μ²λ¦¬ λ°©μ‹ κ³ λ―Ό
- λ©€ν‹°μ¤λ λ”© ν™κ²½μ—μ„ μ•μ „ν• μ‚¬μ©μ μ ‘μ† κ΄€λ¦¬ λ° μ±„ν…λ°© λ™κΈ°ν™”

---

## π’¬ ν–¥ν›„ κ°λ° κ³„ν

- μ±„ν…λ°© λ©”μ‹μ§€ νμ΄μ§• μ²λ¦¬ λ° μ •λ ¬ μµμ ν™”
- μμ„± μ±„ν… ν¨ν‚· μ§€μ—° μ²λ¦¬ λ° ν¨ν‚· μ†μ‹¤ λ€μ‘
- WebSocket μ§€μ› κ²€ν†  (ν™•μ¥μ„± ν™•λ³΄λ¥Ό μ„ν•΄)
- ν΄λΌμ΄μ–ΈνΈ μΈμ¦ ν† ν° μ²λ¦¬ λ°©μ‹ κ°μ„  (JWT λ„μ… κ²€ν† )

---

## π“§ Contact

- κ°λ°μ: JaeHyung Lee  
- ν”„λ΅μ νΈ: L-TALK

